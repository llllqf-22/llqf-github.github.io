<!DOCTYPE html>
<!-- æ–‡æ¡£ç±»å‹å£°æ˜ï¼Œå‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ HTML5 æ–‡æ¡£ -->
<html lang="zh-CN">
<!-- HTML æ ¹æ ‡ç­¾ï¼Œè®¾ç½®é¡µé¢è¯­è¨€ä¸ºç®€ä½“ä¸­æ–‡ -->
<head>
    <!-- å¤´éƒ¨å¼€å§‹ï¼ŒåŒ…å«å…ƒæ•°æ®å’Œé¡µé¢æ ‡é¢˜ç­‰ -->

    <meta charset="UTF-8">
    <!-- è®¾ç½®æ–‡æ¡£å­—ç¬¦ç¼–ç ä¸º UTF-8ï¼Œç¡®ä¿ä¸­æ–‡æ­£å¸¸æ˜¾ç¤º -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- è§†å£è®¾ç½®ï¼Œä½¿é¡µé¢åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè‡ªé€‚åº”ï¼Œåˆå§‹ç¼©æ”¾æ¯”ä¾‹ä¸º1 -->

    <title>æ²ƒå°¼ç›å•†åŸï¼Œæ¢ä¹”é£25216950112</title>
    <!-- ç½‘é¡µæ ‡é¢˜ï¼Œæ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µä¸Š -->

    <style>
        /* --- CSS æ ·å¼åŒºåŸŸå¼€å§‹ --- */

        /* --- åŸºç¡€æ ·å¼ --- */
        
        /* :root ä¼ªç±»å®šä¹‰å…¨å±€ CSS å˜é‡ï¼Œæ–¹ä¾¿ç»´æŠ¤å’Œä¿®æ”¹ */
        :root {
            --primary-color: #007bff; /* ä¸»è‰²è°ƒ (è“è‰²) */
            --bg-color: #f4f4f4; /* é¡µé¢èƒŒæ™¯è‰² (æµ…ç°) */
            --card-bg: #fff; /* å¡ç‰‡èƒŒæ™¯è‰² (ç™½è‰²) */
            --sidebar-width: 200px; /* ä¾§è¾¹æ å›ºå®šå®½åº¦ */
        }

        /* è®¾ç½®é¡µé¢æ•´ä½“å­—ä½“å’ŒèƒŒæ™¯ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* å­—ä½“æ ˆ */
            margin: 0; /* å»æ‰é»˜è®¤è¾¹è· */
            background-color: var(--bg-color); /* ä½¿ç”¨å˜é‡è®¾ç½®èƒŒæ™¯è‰² */
        }

        /* æ‰€æœ‰æŒ‰é’®é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæ‰‹å‹æŒ‡é’ˆ */
        button {
            cursor: pointer;
        }

        /* --- é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ --- */
        header {
            background-color: #333; /* æ·±ç°è‰²èƒŒæ™¯ */
            color: white; /* ç™½è‰²æ–‡å­— */
            padding: 1rem 2rem; /* ä¸Šä¸‹1å€æ ¹å…ƒç´ å­—ä½“å¤§å°ï¼Œå·¦å³2å€ */
            display: flex; /* ä½¿ç”¨ Flexbox å¸ƒå±€ */
            justify-content: space-between; /* å­å…ƒç´ å·¦å³ä¸¤ç«¯å¯¹é½ */
            align-items: center; /* å­å…ƒç´ å‚ç›´å±…ä¸­ */
            position: sticky; /* ç²˜æ€§å®šä½ï¼Œæ»šåŠ¨æ—¶å›ºå®šåœ¨é¡¶éƒ¨ */
            top: 0; /* è·ç¦»é¡¶éƒ¨ä¸º0 */
            z-index: 100; /* è®¾ç½®è¾ƒé«˜çš„å †å é¡ºåºï¼Œç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
        }

        /* ç½‘ç«™ Logo æ ·å¼ */
        .logo {
            font-size: 1.5rem; /* å­—ä½“å¤§å° */
            font-weight: bold; /* åŠ ç²— */
        }

        /* æœç´¢æ æ ·å¼ */
        .search-bar {
            display: flex; /* Flexbox å¸ƒå±€ */
            gap: 5px; /* å­å…ƒç´ ä¹‹é—´çš„é—´éš” */
        }

        /* æœç´¢è¾“å…¥æ¡†æ ·å¼ */
        .search-bar input {
            padding: 5px; /* å†…è¾¹è· */
            border-radius: 4px; /* åœ†è§’ */
            border: none; /* å»æ‰è¾¹æ¡† */
        }

        /* å¯¼èˆªæ å³ä¾§æŒ‰é’®æ ·å¼ (ç™»å½•/è´­ç‰©è½¦) */
        .nav-actions button {
            background: none; /* é€æ˜èƒŒæ™¯ */
            border: 1px solid white; /* ç™½è‰²è¾¹æ¡† */
            color: white; /* ç™½è‰²æ–‡å­— */
            padding: 5px 15px; /* å†…è¾¹è· */
            margin-left: 10px; /* å·¦å¤–è¾¹è·ï¼Œä¸å·¦è¾¹å…ƒç´ åˆ†å¼€ */
            border-radius: 4px; /* åœ†è§’ */
        }

        /* å¯¼èˆªæŒ‰é’®æ‚¬åœæ•ˆæœ */
        .nav-actions button:hover {
            background-color: rgba(255, 255, 255, 0.2); /* åŠé€æ˜ç™½è‰²èƒŒæ™¯ */
        }

        /* --- ä¸»è¦å†…å®¹å¸ƒå±€ (ä¾§è¾¹æ  + å•†å“åˆ—è¡¨) --- */
        .main-layout {
            max-width: 1200px; /* æœ€å¤§å®½åº¦ï¼Œåœ¨å¤§å±å¹•ä¸Šå±…ä¸­æ˜¾ç¤º */
            margin: 20px auto; /* ä¸Šä¸‹è¾¹è·20pxï¼Œå·¦å³è‡ªåŠ¨ (å±…ä¸­) */
            display: flex; /* ä½¿ç”¨ Flexbox å¸ƒå±€ */
            gap: 20px; /* å­å…ƒç´ ä¹‹é—´çš„é—´éš” */
            padding: 0 1rem; /* å·¦å³å†…è¾¹è·ï¼Œé˜²æ­¢å†…å®¹è´´è¾¹ */
        }

        /* --- ä¾§è¾¹æ æ ·å¼ --- */
        .sidebar {
            width: var(--sidebar-width); /* å®½åº¦ä½¿ç”¨å˜é‡ */
            background: var(--card-bg); /* èƒŒæ™¯è‰²ä½¿ç”¨å˜é‡ */
            padding: 15px; /* å†…è¾¹è· */
            border-radius: 8px; /* åœ†è§’ */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* é˜´å½±æ•ˆæœ */
            height: fit-content; /* é«˜åº¦ç”±å†…å®¹å†³å®š */
        }

        /* ä¾§è¾¹æ æ ‡é¢˜æ ·å¼ */
        .sidebar h3 {
            margin-top: 0; /* å»æ‰é»˜è®¤ä¸Šè¾¹è· */
            border-bottom: 1px solid #eee; /* åº•éƒ¨æµ…ç°è‰²è¾¹æ¡† */
            padding-bottom: 10px; /* åº•éƒ¨å†…è¾¹è· */
        }

        /* åˆ†ç±»åˆ—è¡¨å®¹å™¨æ ·å¼ */
        .category-list {
            padding: 0; /* å»æ‰å†…è¾¹è· */
            margin: 0; /* å»æ‰å¤–è¾¹è· */
        }

        /* åˆ†ç±»åˆ—è¡¨é¡¹æ ·å¼ */
        .category-list li {
            list-style: none; /* å»æ‰åˆ—è¡¨é»˜è®¤æ ·å¼ (åœ†ç‚¹) */
            padding: 8px 0; /* ä¸Šä¸‹å†…è¾¹è· */
            cursor: pointer; /* é¼ æ ‡æ‚¬åœæ—¶æ‰‹å‹æŒ‡é’ˆ */
            transition: color 0.2s; /* æ–‡å­—é¢œè‰²å˜åŒ–æ·»åŠ 0.2ç§’è¿‡æ¸¡åŠ¨ç”» */
        }

        /* åˆ†ç±»åˆ—è¡¨é¡¹æ‚¬åœæ•ˆæœ */
        .category-list li:hover {
            color: var(--primary-color); /* å˜ä¸ºä¸»è‰²è°ƒ */
            font-weight: bold; /* åŠ ç²— */
        }

        /* å½“å‰é€‰ä¸­åˆ†ç±»çš„ç‰¹æ®Šæ ·å¼ */
        .category-list .active-category {
            color: var(--primary-color); /* ä¸»è‰²è°ƒ */
            font-weight: bold; /* åŠ ç²— */
            background-color: #e9ecef; /* æµ…ç°è‰²èƒŒæ™¯ */
            padding-left: 5px; /* å·¦è¾¹å¢åŠ å†…è¾¹è· */
            border-radius: 2px; /* è½»å¾®åœ†è§’ */
        }

        /* --- å•†å“åˆ—è¡¨åŒºåŸŸæ ·å¼ --- */
        .product-list-area {
            flex-grow: 1; /* å æ® Flex å®¹å™¨ä¸­æ‰€æœ‰å‰©ä½™ç©ºé—´ */
        }

        /* å•†å“ç½‘æ ¼å®¹å™¨æ ·å¼ */
        .product-grid {
            display: grid; /* ä½¿ç”¨ CSS Grid å¸ƒå±€ */
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            /* è‡ªåŠ¨å¡«å……åˆ—ï¼Œæ¯åˆ—æœ€å°250pxï¼Œæœ€å¤§1ä»½ (ç­‰åˆ†å‰©ä½™ç©ºé—´) */
            gap: 20px; /* ç½‘æ ¼é¡¹ä¹‹é—´çš„é—´éš” */
        }

        /* å•ä¸ªå•†å“å¡ç‰‡æ ·å¼ */
        .product-card {
            background: var(--card-bg); /* èƒŒæ™¯è‰²ä½¿ç”¨å˜é‡ */
            border-radius: 8px; /* åœ†è§’ */
            padding: 15px; /* å†…è¾¹è· */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* é˜´å½±æ•ˆæœ */
            text-align: center; /* æ–‡å­—å±…ä¸­ */
            transition: transform 0.2s; /* æ·»åŠ å˜æ¢æ•ˆæœçš„è¿‡æ¸¡åŠ¨ç”» */
        }

        /* å•†å“å¡ç‰‡æ‚¬åœæ•ˆæœ */
        .product-card:hover {
            transform: translateY(-5px); /* å‘ä¸Šç§»åŠ¨5åƒç´ ï¼Œäº§ç”Ÿæµ®åŠ¨æ„Ÿ */
        }

        /* å•†å“å›¾ç‰‡å ä½æ ·å¼ */
        .product-img {
            width: 100%; /* å®½åº¦100%å¡«æ»¡å®¹å™¨ */
            height: 150px; /* å›ºå®šé«˜åº¦ */
            background-color: #ddd; /* é»˜è®¤èƒŒæ™¯è‰²ï¼Œå›¾ç‰‡åŠ è½½å‰çš„å ä½è‰² */
            object-fit: cover; /* å›¾ç‰‡ä¿æŒæ¯”ä¾‹ï¼Œè¦†ç›–æ•´ä¸ªå®¹å™¨ */
            margin-bottom: 10px; /* åº•éƒ¨å¤–è¾¹è· */
        }

        /* å•†å“ä»·æ ¼æ ·å¼ */
        .price {
            color: #e4393c; /* çº¢è‰² */
            font-weight: bold; /* åŠ ç²— */
            font-size: 1.2rem; /* å­—ä½“å¤§å° */
            margin: 10px 0; /* ä¸Šä¸‹å¤–è¾¹è· */
        }

        /* â€œåŠ å…¥è´­ç‰©è½¦â€æŒ‰é’®æ ·å¼ */
        .add-btn {
            background-color: var(--primary-color); /* ä½¿ç”¨ä¸»è‰²è°ƒ */
            color: white; /* ç™½è‰²æ–‡å­— */
            border: none; /* å»æ‰è¾¹æ¡† */
            padding: 8px 16px; /* å†…è¾¹è· */
            border-radius: 4px; /* åœ†è§’ */
            width: 100%; /* å®½åº¦100%å¡«æ»¡å®¹å™¨ */
        }

        /* --- æ¨¡æ€æ¡† (è´­ç‰©è½¦/ç™»å½•æ³¨å†Œ) æ ·å¼ --- */
        /* æ¨¡æ€æ¡†èƒŒæ™¯å±‚æ ·å¼ */
        #cart-modal,
        #auth-modal {
            display: none; /* é»˜è®¤éšè— */
            position: fixed; /* å›ºå®šå®šä½ï¼Œç›¸å¯¹äºè§†å£ */
            top: 0;
            left: 0;
            width: 100%; /* å…¨å®½ */
            height: 100%; /* å…¨é«˜ */
            background: rgba(0, 0, 0, 0.5); /* åŠé€æ˜ç™½è‰²èƒŒæ™¯ */
            z-index: 200; /* å †å é¡ºåºï¼Œç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
            justify-content: center; /* Flexbox æ°´å¹³å±…ä¸­ */
            align-items: center; /* Flexbox å‚ç›´å±…ä¸­ */
        }

        /* æ¨¡æ€æ¡†å†…å®¹å®¹å™¨æ ·å¼ */
        .modal-content {
            background: white; /* ç™½è‰²èƒŒæ™¯ */
            padding: 20px; /* å†…è¾¹è· */
            border-radius: 8px; /* åœ†è§’ */
            width: 90%; /* å®½åº¦å è§†å£90% */
            max-width: 500px; /* æœ€å¤§å®½åº¦é™åˆ¶ */
            position: relative; /* ç›¸å¯¹å®šä½ï¼Œæ–¹ä¾¿å­å…ƒç´ ç»å¯¹å®šä½ */
        }

        /* å…³é—­æŒ‰é’®æ ·å¼ (å³ä¸Šè§’çš„X) */
        .close-btn {
            float: right; /* å³æµ®åŠ¨ */
            font-size: 1.5rem; /* å­—ä½“å¤§å° */
            cursor: pointer; /* æ‰‹å‹æŒ‡é’ˆ */
        }

        /* è´­ç‰©è½¦å•ä¸ªå•†å“é¡¹æ ·å¼ */
        .cart-item {
            display: flex; /* Flexbox å¸ƒå±€ */
            justify-content: space-between; /* å·¦å³ä¸¤ç«¯å¯¹é½ */
            border-bottom: 1px solid #eee; /* åº•éƒ¨æµ…ç°è‰²è¾¹æ¡† */
            padding: 10px 0; /* ä¸Šä¸‹å†…è¾¹è· */
        }

        /* è´­ç‰©è½¦æ€»è®¡æ ·å¼ */
        .cart-total {
            text-align: right; /* æ–‡å­—å³å¯¹é½ */
            margin-top: 20px; /* ä¸Šå¤–è¾¹è· */
            font-weight: bold; /* åŠ ç²— */
            font-size: 1.2rem; /* å­—ä½“å¤§å° */
        }

        /* ç™»å½•/æ³¨å†Œè¡¨å•è¾“å…¥æ¡†æ ·å¼ */
        .auth-form input {
            display: block; /* å—çº§æ˜¾ç¤ºï¼Œç‹¬å ä¸€è¡Œ */
            width: 100%; /* å®½åº¦100%å¡«æ»¡å®¹å™¨ */
            padding: 10px; /* å†…è¾¹è· */
            margin: 10px 0; /* ä¸Šä¸‹å¤–è¾¹è· */
            box-sizing: border-box; /* ç›’æ¨¡å‹ï¼šå®½åº¦å’Œé«˜åº¦åŒ…å«å†…è¾¹è·å’Œè¾¹æ¡† */
        }

        /* ç™»å½•/æ³¨å†Œè¡¨å•æŒ‰é’®æ ·å¼ */
        .auth-form button {
            width: 100%; /* å®½åº¦100%å¡«æ»¡å®¹å™¨ */
            padding: 10px; /* å†…è¾¹è· */
            background-color: var(--primary-color); /* ä½¿ç”¨ä¸»è‰²è°ƒ */
            color: white; /* ç™½è‰²æ–‡å­— */
            border: none; /* å»æ‰è¾¹æ¡† */
        }

        /* ç™»å½•/æ³¨å†Œåˆ‡æ¢é“¾æ¥æ ·å¼ */
        .switch-auth {
            text-align: center; /* æ–‡å­—å±…ä¸­ */
            margin-top: 10px; /* ä¸Šå¤–è¾¹è· */
            font-size: 0.9rem; /* å­—ä½“å¤§å°ç¨å° */
            color: #666; /* æ·±ç°è‰²æ–‡å­— */
            cursor: pointer; /* æ‰‹å‹æŒ‡é’ˆ */
        }
    </style>
    <!-- CSS æ ·å¼åŒºåŸŸç»“æŸ -->
</head>
<!-- å¤´éƒ¨ç»“æŸ -->

<body>
<!-- é¡µé¢ä¸»ä½“å†…å®¹å¼€å§‹ -->

<!-- é¡¶éƒ¨å¯¼èˆªæ  -->
<header>
    <!-- ç½‘ç«™ Logo -->
    <div class="logo">æ²ƒå°¼ç›å•†åŸ</div>

    <!-- æœç´¢æ¡†åŒºåŸŸ -->
    <div class="search-bar">
        <!-- æœç´¢è¾“å…¥æ¡†ï¼Œonkeyup äº‹ä»¶è§¦å‘æœç´¢å‡½æ•° -->
        <input type="text" id="search-input" placeholder="æœç´¢å•†å“..." onkeyup="handleSearch()">
    </div>

    <!-- å¯¼èˆªæ å³ä¾§æ“ä½œåŒº -->
    <div class="nav-actions">
        <!-- ç”¨æˆ·æ¬¢è¿ä¿¡æ¯ï¼Œé»˜è®¤éšè— -->
        <span id="user-display" style="display:none; margin-right:10px;">
            æ¬¢è¿, <span id="username-span"></span>
        </span>
        <!-- ç™»å½•/æ³¨å†ŒæŒ‰é’®ï¼Œç‚¹å‡»æ‰“å¼€ç™»å½•æ³¨å†Œæ¨¡æ€æ¡† -->
        <button id="auth-btn" onclick="openAuthModal()">ç™»å½• / æ³¨å†Œ</button>
        <!-- è´­ç‰©è½¦æŒ‰é’®ï¼Œæ˜¾ç¤ºè´­ç‰©è½¦å•†å“æ•°é‡ -->
        <button onclick="openCart()">
            ğŸ›’ è´­ç‰©è½¦ (<span id="cart-count">0</span>)
        </button>
    </div>
</header>
<!-- é¡¶éƒ¨å¯¼èˆªæ ç»“æŸ -->

<!-- é¡µé¢ä¸»è¦å†…å®¹åŒºåŸŸ (ä¾§è¾¹æ  + å•†å“åˆ—è¡¨) -->
<div class="main-layout">

    <!-- ä¾§è¾¹æ ï¼šå•†å“åˆ†ç±» -->
    <div class="sidebar">
        <h3>å•†å“åˆ†ç±»</h3>
        <!-- åˆ†ç±»åˆ—è¡¨ï¼Œé€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
        <ul id="category-list" class="category-list">
            <!-- åˆ—è¡¨é¡¹å°†ç”± JS å¡«å…… -->
        </ul>
    </div>

    <!-- å•†å“åˆ—è¡¨åŒºåŸŸ -->
    <div class="product-list-area">
        <h2>å•†å“åˆ—è¡¨</h2>
        <!-- å•†å“ç½‘æ ¼å®¹å™¨ï¼Œé€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆå•†å“å¡ç‰‡ -->
        <div id="product-list" class="product-grid">
            <!-- å•†å“å¡ç‰‡å°†ç”± JS å¡«å…… -->
        </div>
    </div>

</div>
<!-- ä¸»è¦å†…å®¹åŒºåŸŸç»“æŸ -->

<!-- è´­ç‰©è½¦æ¨¡æ€æ¡† (å¼¹çª—) -->
<div id="cart-modal">
    <div class="modal-content">
        <!-- å…³é—­æŒ‰é’® -->
        <span class="close-btn" onclick="closeCart()">&times;</span>
        <h3>æˆ‘çš„è´­ç‰©è½¦</h3>
        <!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨å®¹å™¨ -->
        <div id="cart-items">
            <!-- é»˜è®¤æç¤ºä¿¡æ¯ï¼Œè´­ç‰©è½¦ä¸ºç©ºæ—¶æ˜¾ç¤º -->
            <p>è´­ç‰©è½¦æ˜¯ç©ºçš„</p>
        </div>
        <!-- è´­ç‰©è½¦æ€»è®¡ -->
        <div class="cart-total">æ€»è®¡: Â¥<span id="cart-total-price">0</span></div>
        <!-- ç»“ç®—æŒ‰é’® -->
        <button class="add-btn" style="margin-top:10px" onclick="checkout()">å»ç»“ç®—</button>
    </div>
</div>

<!-- ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡† (å¼¹çª—) -->
<div id="auth-modal">
    <div class="modal-content">
        <!-- å…³é—­æŒ‰é’® -->
        <span class="close-btn" onclick="closeAuth()">&times;</span>

        <!-- ç™»å½•è¡¨å•ï¼Œé»˜è®¤æ˜¾ç¤º -->
        <div id="login-form" class="auth-form">
            <h3>ç”¨æˆ·ç™»å½•</h3>
            <input type="text" id="login-user" placeholder="ç”¨æˆ·å">
            <input type="password" placeholder="å¯†ç  (éšæ„è¾“å…¥)">
            <button onclick="handleLogin()">ç™»å½•</button>
            <!-- åˆ‡æ¢åˆ°æ³¨å†Œçš„é“¾æ¥ -->
            <div class="switch-auth" onclick="toggleAuthMode()">æ²¡æœ‰è´¦å·ï¼Ÿå»æ³¨å†Œ</div>
        </div>

        <!-- æ³¨å†Œè¡¨å•ï¼Œé»˜è®¤éšè— -->
        <div id="register-form" class="auth-form" style="display:none;">
            <h3>æ–°ç”¨æˆ·æ³¨å†Œ</h3>
            <input type="text" placeholder="ç”¨æˆ·å">
            <input type="email" placeholder="é‚®ç®±">
            <input type="password" placeholder="è®¾ç½®å¯†ç ">
            <button onclick="handleRegister()">æ³¨å†Œ</button>
            <!-- åˆ‡æ¢åˆ°ç™»å½•çš„é“¾æ¥ -->
            <div class="switch-auth" onclick="toggleAuthMode()">å·²æœ‰è´¦å·ï¼Ÿå»ç™»å½•</div>
        </div>
    </div>
</div>

<!-- JavaScript ä»£ç åŒºåŸŸå¼€å§‹ -->
<script>
    // ======================================================================
    // --- æ¨¡æ‹Ÿæ•°æ® ---
    // ======================================================================
    // å®šä¹‰å•†å“æ•°æ®æ•°ç»„ï¼Œæ¯ä¸ªå•†å“æ˜¯ä¸€ä¸ªå¯¹è±¡
    const productsData = [
        // --- ç”µå­äº§å“ (Electronics) ---
        { id: 1, name: "æ™ºèƒ½æ‰‹æœº", price: 9999, category: "ç”µå­äº§å“", img: "./img/æ‰‹æœº.jpg" },
        { id: 2, name: "é™å™ªè€³æœº", price: 3999, category: "ç”µå­äº§å“", img: "./img/è€³æœº.jpg" },
        { id: 3, name: "æœºæ¢°é”®ç›˜", price: 399, category: "ç”µå­äº§å“", img: "./img/æœºæ¢°é”®ç›˜.jpg" },

        // --- å®¶å±…ç”¨å“ (Home Goods) ---
        { id: 4, name: "æ—¶å°šèŒ¶å‡ ", price: 899, category: "å®¶å±…ç”¨å“", img: "./img/èŒ¶å‡ .jpg" },
        { id: 5, name: "æ²™å‘", price: 199, category: "å®¶å±…ç”¨å“", img: "./img/æ²™å‘.jpg" },
        { id: 6, name: "æ‰«åœ°æœºå™¨äºº", price: 2999, category: "å®¶å±…ç”¨å“", img: "./img/æ‰«åœ°æœºå™¨äºº.jpg" },

        // --- é£Ÿå“é¥®æ–™ (Food & Beverage) ---
        { id: 7, name: "è¿›å£å’–å•¡è±†", price: 159, category: "é£Ÿå“é¥®æ–™", img: "./img/å’–å•¡è±†.jpg" },
        { id: 8, name: "æœ‰æœºç‰›å¥¶", price: 68, category: "é£Ÿå“é¥®æ–™", img: "./img/ç‰›å¥¶.jpg" },
        { id: 9, name: "æ³•å›½å¹²çº¢è‘¡è„é…’", price: 599, category: "é£Ÿå“é¥®æ–™", img: "./img/è‘¡è„é…’.jpg" },
    ];

    // ä»å•†å“æ•°æ®ä¸­æå–æ‰€æœ‰ä¸é‡å¤çš„åˆ†ç±»ï¼Œå¹¶åœ¨å‰é¢åŠ ä¸Š"æ‰€æœ‰å•†å“"
    // Set å¯¹è±¡ç”¨äºå»é‡ï¼Œmap æ–¹æ³•æå– category å±æ€§
    const categories = ["æ‰€æœ‰å•†å“", ...new Set(productsData.map(p => p.category))];

    // ======================================================================
    // --- çŠ¶æ€ç®¡ç† ---
    // ======================================================================
    let cart = []; // è´­ç‰©è½¦æ•°ç»„ï¼Œå­˜å‚¨å·²æ·»åŠ çš„å•†å“
    let currentUser = null; // å½“å‰ç™»å½•ç”¨æˆ·ï¼Œnull è¡¨ç¤ºæœªç™»å½•
    let currentCategory = "æ‰€æœ‰å•†å“"; // å½“å‰é€‰ä¸­çš„å•†å“åˆ†ç±»

    // ======================================================================
    // --- åˆå§‹åŒ– ---
    // ======================================================================
    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œåˆå§‹åŒ–å‡½æ•°
    window.onload = () => {
        renderCategories(); // æ¸²æŸ“åˆ†ç±»ä¾§è¾¹æ 
        renderProducts(productsData); // æ¸²æŸ“æ‰€æœ‰å•†å“åˆ—è¡¨
    };

    // ======================================================================
    // --- ä¾§è¾¹åˆ†ç±»é€»è¾‘ ---
    // ======================================================================

    /**
     * æ¸²æŸ“å•†å“åˆ†ç±»åˆ—è¡¨åˆ°ä¾§è¾¹æ 
     */
    function renderCategories() {
        const ul = document.getElementById('category-list'); // è·å–ä¾§è¾¹æ åˆ—è¡¨å®¹å™¨
        ul.innerHTML = ""; // æ¸…ç©ºç°æœ‰å†…å®¹ï¼Œé˜²æ­¢é‡å¤

        // éå†åˆ†ç±»æ•°ç»„ï¼Œä¸ºæ¯ä¸ªåˆ†ç±»åˆ›å»ºåˆ—è¡¨é¡¹
        categories.forEach(cat => {
            const li = document.createElement('li'); // åˆ›å»º li å…ƒç´ 
            li.innerText = cat; // è®¾ç½®æ–‡æœ¬å†…å®¹ä¸ºåˆ†ç±»å
            // ç‚¹å‡»åˆ†ç±»æ—¶ï¼Œè§¦å‘ç­›é€‰å‡½æ•°
            li.onclick = () => filterByCategory(cat);

            // å¦‚æœå½“å‰åˆ†ç±»æ˜¯è¢«é€‰ä¸­çš„åˆ†ç±»ï¼Œæ·»åŠ é«˜äº®æ ·å¼
            if (cat === currentCategory) {
                li.classList.add('active-category');
            }

            ul.appendChild(li); // å°†åˆ—è¡¨é¡¹æ·»åŠ åˆ°åˆ—è¡¨ä¸­
        });
    }

    /**
     * æ ¹æ®é€‰ä¸­çš„åˆ†ç±»ç­›é€‰å•†å“
     * @param {string} category - è¦ç­›é€‰çš„åˆ†ç±»åç§°
     */
    function filterByCategory(category) {
        currentCategory = category; // æ›´æ–°å½“å‰é€‰ä¸­çš„åˆ†ç±»
        let filteredList; // å­˜å‚¨ç­›é€‰åçš„å•†å“åˆ—è¡¨

        // å¦‚æœé€‰ä¸­çš„æ˜¯"æ‰€æœ‰å•†å“"ï¼Œæ˜¾ç¤ºå…¨éƒ¨
        if (category === "æ‰€æœ‰å•†å“") {
            filteredList = productsData;
        } else {
            // å¦åˆ™ï¼Œç­›é€‰å‡ºå±äºè¯¥åˆ†ç±»çš„å•†å“
            filteredList = productsData.filter(p => p.category === category);
        }

        // é‡æ–°æ¸²æŸ“åˆ†ç±»åˆ—è¡¨ (æ›´æ–°é«˜äº®) å’Œå•†å“åˆ—è¡¨
        renderCategories();
        renderProducts(filteredList);
    }

    // ======================================================================
    // --- æ ¸å¿ƒåŠŸèƒ½ ---
    // ======================================================================

    /**
     * æ¸²æŸ“å•†å“åˆ—è¡¨åˆ°é¡µé¢
     * @param {Array} list - è¦æ¸²æŸ“çš„å•†å“æ•°ç»„
     */
    function renderProducts(list) {
        const container = document.getElementById('product-list'); // è·å–å•†å“åˆ—è¡¨å®¹å™¨
        container.innerHTML = ""; // æ¸…ç©ºç°æœ‰å†…å®¹

        // å¦‚æœåˆ—è¡¨ä¸ºç©ºï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
        if (list.length === 0) {
            container.innerHTML = "<p style='text-align:center; padding: 20px;'>æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å•†å“</p>";
            return; // ç»“æŸå‡½æ•°æ‰§è¡Œ
        }

        // éå†å•†å“æ•°ç»„ï¼Œä¸ºæ¯ä¸ªå•†å“åˆ›å»ºå¡ç‰‡
        list.forEach(product => {
            const card = document.createElement('div'); // åˆ›å»ºå¡ç‰‡å®¹å™¨
            card.className = 'product-card'; // æ·»åŠ  CSS ç±»å

            // ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è®¾ç½®å¡ç‰‡å†…éƒ¨ HTML ç»“æ„
            card.innerHTML = `
                <img src="${product.img}" class="product-img" alt="${product.name}">
                <h3>${product.name}</h3>
                <p style="font-size:0.9rem; color:#666;">åˆ†ç±»: ${product.category}</p>
                <div class="price">Â¥${product.price}</div>
                <button class="add-btn" onclick="addToCart(${product.id})">åŠ å…¥è´­ç‰©è½¦</button>
            `;

            container.appendChild(card); // å°†å¡ç‰‡æ·»åŠ åˆ°å®¹å™¨ä¸­
        });
    }

    /**
     * å¤„ç†æœç´¢åŠŸèƒ½ï¼Œæ ¹æ®è¾“å…¥çš„å…³é”®è¯ç­›é€‰å•†å“
     */
    function handleSearch() {
        // è·å–æœç´¢è¾“å…¥æ¡†çš„å€¼ï¼Œå¹¶è½¬ä¸ºå°å†™ä»¥ä¾¿ä¸åŒºåˆ†å¤§å°å†™
        const keyword = document.getElementById('search-input').value.toLowerCase();
        let baseList; // åŸºå‡†åˆ—è¡¨ï¼ŒåŸºäºå½“å‰åˆ†ç±»

        // æ ¹æ®å½“å‰é€‰ä¸­çš„åˆ†ç±»ç¡®å®šè¦æœç´¢çš„åˆ—è¡¨
        if (currentCategory === "æ‰€æœ‰å•†å“") {
            baseList = productsData; // æœç´¢æ‰€æœ‰å•†å“
        } else {
            // åªåœ¨å½“å‰åˆ†ç±»ä¸­æœç´¢
            baseList = productsData.filter(p => p.category === currentCategory);
        }

        // ç­›é€‰å‡ºåç§°åŒ…å«å…³é”®è¯çš„å•†å“
        const filtered = baseList.filter(p => p.name.toLowerCase().includes(keyword));
        renderProducts(filtered); // æ¸²æŸ“ç­›é€‰ç»“æœ
    }

    /**
     * å°†æŒ‡å®šå•†å“æ·»åŠ åˆ°è´­ç‰©è½¦
     * @param {number} id - å•†å“ID
     */
    function addToCart(id) {
        // åœ¨å•†å“æ•°æ®ä¸­æŸ¥æ‰¾å¯¹åº”IDçš„å•†å“
        const product = productsData.find(p => p.id === id);
        // æ£€æŸ¥è´­ç‰©è½¦ä¸­æ˜¯å¦å·²å­˜åœ¨è¯¥å•†å“
        const existingItem = cart.find(item => item.id === id);

        if (existingItem) {
            // å¦‚æœå·²å­˜åœ¨ï¼Œå¢åŠ æ•°é‡
            existingItem.quantity += 1;
        } else {
            // å¦‚æœä¸å­˜åœ¨ï¼Œæ·»åŠ æ–°å•†å“ï¼Œå¹¶è®¾ç½®åˆå§‹æ•°é‡ä¸º1
            cart.push({ ...product, quantity: 1 });
        }

        updateCartUI(); // æ›´æ–°è´­ç‰©è½¦ç•Œé¢
        alert(`å·²å°† ${product.name} åŠ å…¥è´­ç‰©è½¦`); // æç¤ºç”¨æˆ·
    }

    /**
     * æ›´æ–°è´­ç‰©è½¦ç•Œé¢æ˜¾ç¤º (æ•°é‡å’Œæ€»ä»·)
     */
    function updateCartUI() {
        // è®¡ç®—è´­ç‰©è½¦ä¸­æ‰€æœ‰å•†å“çš„æ€»æ•°é‡
        const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
        // æ›´æ–°è´­ç‰©è½¦æŒ‰é’®ä¸Šçš„æ•°é‡æ˜¾ç¤º
        document.getElementById('cart-count').innerText = totalCount;

        const cartItemsContainer = document.getElementById('cart-items'); // è´­ç‰©è½¦å•†å“åˆ—è¡¨å®¹å™¨
        let totalPrice = 0; // æ€»ä»·æ ¼ï¼Œåˆå§‹ä¸º0

        // å¦‚æœè´­ç‰©è½¦ä¸ºç©ºï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
        if (cart.length === 0) {
            cartItemsContainer.innerHTML = "<p>è´­ç‰©è½¦æ˜¯ç©ºçš„</p>";
        } else {
            cartItemsContainer.innerHTML = ""; // æ¸…ç©ºç°æœ‰å†…å®¹
            // éå†è´­ç‰©è½¦ä¸­çš„æ¯ä¸ªå•†å“ï¼Œç”ŸæˆHTML
            cart.forEach(item => {
                totalPrice += item.price * item.quantity; // ç´¯åŠ å•†å“æ€»ä»·
                cartItemsContainer.innerHTML += `
                    <div class="cart-item">
                        <span>${item.name} x ${item.quantity}</span>
                        <span>Â¥${item.price * item.quantity}</span>
                    </div>
                `;
            });
        }
        // æ›´æ–°æ€»è®¡ä»·æ ¼æ˜¾ç¤º
        document.getElementById('cart-total-price').innerText = totalPrice;
    }

    /**
     * æ‰“å¼€è´­ç‰©è½¦æ¨¡æ€æ¡†
     */
    function openCart() {
        document.getElementById('cart-modal').style.display = 'flex'; // æ˜¾ç¤ºæ¨¡æ€æ¡†
        updateCartUI(); // æ›´æ–°æ˜¾ç¤ºå†…å®¹
    }

    /**
     * å…³é—­è´­ç‰©è½¦æ¨¡æ€æ¡†
     */
    function closeCart() {
        document.getElementById('cart-modal').style.display = 'none'; // éšè—æ¨¡æ€æ¡†
    }

    /**
     * ç»“ç®—è´­ç‰©è½¦
     */
    function checkout() {
        // å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œæç¤ºç™»å½•å¹¶æ‰“å¼€ç™»å½•æ¡†
        if (!currentUser) {
            alert("è¯·å…ˆç™»å½•ï¼");
            closeCart(); // å…³é—­è´­ç‰©è½¦
            openAuthModal(); // æ‰“å¼€ç™»å½•æ³¨å†Œæ¡†
        } else {
            // è·å–æ€»ä»·å¹¶æ˜¾ç¤ºç»“ç®—æˆåŠŸæ¶ˆæ¯
            alert(`ç»“ç®—æˆåŠŸï¼å…±æ¶ˆè´¹ Â¥${document.getElementById('cart-total-price').innerText}`);
            cart = []; // æ¸…ç©ºè´­ç‰©è½¦æ•°ç»„
            updateCartUI(); // æ›´æ–°ç•Œé¢
            closeCart(); // å…³é—­è´­ç‰©è½¦
        }
    }

    // ======================================================================
    // --- ç™»å½•/æ³¨å†Œé€»è¾‘ ---
    // ======================================================================

    /**
     * æ‰“å¼€ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡†
     */
    function openAuthModal() {
        document.getElementById('auth-modal').style.display = 'flex';
    }

    /**
     * å…³é—­ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡†
     */
    function closeAuth() {
        document.getElementById('auth-modal').style.display = 'none';
    }

    /**
     * åœ¨ç™»å½•å’Œæ³¨å†Œè¡¨å•ä¹‹é—´åˆ‡æ¢
     */
    function toggleAuthMode() {
        const loginForm = document.getElementById('login-form');
        const regForm = document.getElementById('register-form');
        // åˆ¤æ–­å½“å‰æ˜¾ç¤ºçš„æ˜¯å“ªä¸ªè¡¨å•ï¼Œç„¶ååˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€
        if (loginForm.style.display === 'none') {
            loginForm.style.display = 'block';
            regForm.style.display = 'none';
        } else {
            loginForm.style.display = 'none';
            regForm.style.display = 'block';
        }
    }

    /**
     * å¤„ç†ç”¨æˆ·ç™»å½•
     */
    function handleLogin() {
        const username = document.getElementById('login-user').value; // è·å–è¾“å…¥çš„ç”¨æˆ·å
        if (!username) return alert("è¯·è¾“å…¥ç”¨æˆ·å"); // ç®€å•éªŒè¯

        currentUser = username; // æ›´æ–°å½“å‰ç”¨æˆ·çŠ¶æ€
        // æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        document.getElementById('user-display').style.display = 'inline';
        document.getElementById('username-span').innerText = currentUser;
        // æ›´æ–°æŒ‰é’®æ–‡å­—å’Œç‚¹å‡»äº‹ä»¶ä¸ºé€€å‡ºç™»å½•
        document.getElementById('auth-btn').innerText = "é€€å‡ºç™»å½•";
        document.getElementById('auth-btn').onclick = handleLogout;

        closeAuth(); // å…³é—­æ¨¡æ€æ¡†
        alert("ç™»å½•æˆåŠŸï¼"); // æç¤ºç”¨æˆ·
    }

    /**
     * å¤„ç†ç”¨æˆ·é€€å‡ºç™»å½•
     */
    function handleLogout() {
        currentUser = null; // æ¸…ç©ºå½“å‰ç”¨æˆ·
        // éšè—æ¬¢è¿ä¿¡æ¯
        document.getElementById('user-display').style.display = 'none';
        // æ¢å¤æŒ‰é’®ä¸ºç™»å½•çŠ¶æ€
        document.getElementById('auth-btn').innerText = "ç™»å½• / æ³¨å†Œ";
        document.getElementById('auth-btn').onclick = openAuthModal;
        alert("å·²é€€å‡ºç™»å½•"); // æç¤ºç”¨æˆ·
    }

    /**
     * å¤„ç†ç”¨æˆ·æ³¨å†Œ (æ¨¡æ‹Ÿ)
     */
    function handleRegister() {
        alert("æ³¨å†ŒæˆåŠŸï¼Œè¯·ç›´æ¥ç™»å½•"); // æç¤ºç”¨æˆ·
        toggleAuthMode(); // åˆ‡æ¢å›ç™»å½•è¡¨å•
    }

    // ======================================================================
    // --- äº‹ä»¶ç›‘å¬ ---
    // ======================================================================
    // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯ (éå†…å®¹åŒºåŸŸ) æ—¶å…³é—­æ¨¡æ€æ¡†
    window.onclick = function (event) {
        if (event.target == document.getElementById('cart-modal')) closeCart();
        if (event.target == document.getElementById('auth-modal')) closeAuth();
    }
</script>
<!-- JavaScript ä»£ç åŒºåŸŸç»“æŸ -->

</body>
<!-- é¡µé¢ä¸»ä½“å†…å®¹ç»“æŸ -->
</html>
<!-- HTML æ–‡æ¡£ç»“æŸ -->